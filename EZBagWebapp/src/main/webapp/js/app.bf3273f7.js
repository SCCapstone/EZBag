(function(t){function e(e){for(var r,a,o=e[0],s=e[1],i=e[2],d=0,f=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);p&&p(e);while(f.length)f.shift()();return u.push.apply(u,i||[]),n()}function n(){for(var t,e=0;e<u.length;e++){for(var n=u[e],r=!0,a=1;a<n.length;a++){var o=n[a];0!==c[o]&&(r=!1)}r&&(u.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},c={app:0},u=[];function o(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{"chunk-0ab0eca6":"08be30cd","chunk-2d0b9404":"5b5a50bf","chunk-4116dfdd":"aba09b1a","chunk-c961a628":"255918d3",about:"b5727623","chunk-04ef9a62":"2f248813","chunk-4fc6d885":"bdbbe103","chunk-2b84ac21":"654d6f02","chunk-2f7346e2":"749a277e","chunk-595d3815":"b0ce2cb3","chunk-cd31d082":"4bc2d147"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-0ab0eca6":1,"chunk-4116dfdd":1,"chunk-c961a628":1,about:1,"chunk-04ef9a62":1,"chunk-4fc6d885":1,"chunk-2b84ac21":1,"chunk-2f7346e2":1,"chunk-595d3815":1,"chunk-cd31d082":1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise((function(e,n){for(var r="css/"+({about:"about"}[t]||t)+"."+{"chunk-0ab0eca6":"90deec5e","chunk-2d0b9404":"31d6cfe0","chunk-4116dfdd":"e8e1e21c","chunk-c961a628":"490dce6c",about:"29a81a61","chunk-04ef9a62":"73497740","chunk-4fc6d885":"e5a04aaf","chunk-2b84ac21":"66db6f09","chunk-2f7346e2":"4e0f2393","chunk-595d3815":"30c6639f","chunk-cd31d082":"f2171115"}[t]+".css",c=s.p+r,u=document.getElementsByTagName("link"),o=0;o<u.length;o++){var i=u[o],d=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(d===r||d===c))return e()}var f=document.getElementsByTagName("style");for(o=0;o<f.length;o++){i=f[o],d=i.getAttribute("data-href");if(d===r||d===c)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var r=e&&e.target&&e.target.src||c,u=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete a[t],p.parentNode.removeChild(p),n(u)},p.href=c;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){a[t]=0})));var r=c[t];if(0!==r)if(r)e.push(r[2]);else{var u=new Promise((function(e,n){r=c[t]=[e,n]}));e.push(r[2]=u);var i,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=o(t);var f=new Error;i=function(e){d.onerror=d.onload=null,clearTimeout(p);var n=c[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;f.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",f.name="ChunkLoadError",f.type=r,f.request=a,n[1](f)}c[t]=void 0}};var p=setTimeout((function(){i({type:"timeout",target:d})}),12e4);d.onerror=d.onload=i,document.head.appendChild(d)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/EZBagWebapp/",s.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=e,i=i.slice();for(var f=0;f<i.length;f++)e(i[f]);var p=d;u.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[t.show_customer_header?n("div",[n("v-app-bar",{attrs:{app:"","elevate-on-scroll":"",color:"primary",dark:""}},[n("v-tabs",{attrs:{"fixed-tabs":""}},[n("v-tab",{attrs:{to:"/"}},[t._v("Home")]),n("v-tab",{attrs:{to:"/cart"}},[t._v("Cart")])],1)],1)],1):t._e(),t.show_business_header?n("div",[n("v-app-bar",{attrs:{app:"","elevate-on-scroll":"",color:"primary",dark:""}},[n("v-tabs",{attrs:{"fixed-tabs":""}},[n("v-tab",{attrs:{to:"/store"}},[t._v("Verification")]),n("v-tab",{attrs:{to:"/statistics"}},[t._v("Sales")])],1)],1)],1):t._e(),n("v-main",[n("router-view",{on:{toggleHeader:t.toggleHeader}})],1)],1)},c=[],u={data:function(){return{show_customer_header:!1,show_business_header:!1}},methods:{toggleHeader:function(t){"customer"==t?(this.show_customer_header=!0,this.show_business_header=!1):"business"==t?(this.show_customer_header=!1,this.show_business_header=!0):(this.show_customer_header=!1,this.show_business_header=!1)},navigateToSearchPage:function(){this.$router.push("/search")}}},o=u,s=n("2877"),i=n("6544"),d=n.n(i),f=n("7496"),p=n("40dc"),h=n("f6c4"),l=n("71a3"),b=n("fe57"),m=Object(s["a"])(o,a,c,!1,null,null,null),g=m.exports;d()(m,{VApp:f["a"],VAppBar:p["a"],VMain:h["a"],VTab:l["a"],VTabs:b["a"]});var v=n("f309");r["a"].use(v["a"]);var w=new v["a"]({}),k=(n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("2f62")),y=n("bfa9"),I=(n("a4d3"),n("e01a"),n("4de4"),n("7db0"),n("d81d"),n("13d5"),n("b0c0"),n("53ca")),C=(n("96cf"),n("1da1")),P={methods:{$dbg_console_log:function(){}}},_=n("bc3a"),S=n.n(_),x=n("a78e"),O=n.n(x),E=P.methods,D=E.$dbg_console_log;S.a.defaults.baseURL="https://blakeedwards.me:8443/",S.a.defaults.timeout=2e3;var R={knownProducts:[],productsInCart:[],businessID:null,cartHash:null},T={getProductsInCart:function(t){return t.productsInCart},getSubtotal:function(t){return Math.ceil(100*t.productsInCart.reduce((function(t,e){return t+e.price*e.quantity}),0))/100},getTax:function(t){return Math.ceil(100*t.productsInCart.reduce((function(t,e){return t+e.tax*e.quantity}),0))/100},getBusinessID:function(t){return t.businessID},getCartHash:function(t){return t.cartHash}},j={fetchProducts:function(t,e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=JSON.stringify({businessID:e}),t.abrupt("return",new Promise((function(t,e){S.a.post("EZBagWebapp/webapi/products",n).then((function(e){"failure"!=e.data.status?(console.log(e.data),t({products:e.data.products,count:e.data.count,success:1})):t({success:0,message:e.data.message})})).catch((function(t){e(t)}))})));case 2:case"end":return t.stop()}}),t)})))()},sendReceipt:function(t,e){return Object(C["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){S.a.post("EZBagWebapp/webapi/info",JSON.stringify(e),{timeout:"2000"}).then((function(e){"failure"!=e.data.status?t({success:1}):t({success:0,message:e.data.message})})).catch((function(t){n(t)}))})));case 1:case"end":return t.stop()}}),t)})))()},addProductToCart:function(t,e){return Object(C["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.barcode,a=e.businessID,n.abrupt("return",new Promise((function(e,n){var c=t.state.productsInCart.find((function(t){return t.barcode==r}));void 0===c?(c=t.state.knownProducts.find((function(t){return t.barcode==r})),void 0===c?S.a.post("EZBagWebapp/webapi/lookup",JSON.stringify({barcode:r,businessID:a})).then((function(n){"failure"!=n.data.status?(t.commit("addToKnownProducts",{barcode:n.data.barcode,name:n.data.name,price:n.data.price,tax:n.data.tax,description:n.data.description,businessID:a,exists:!0}),t.commit("addToCartFromKnownProducts",r),e({productIsInCart:!0,productWasAlreadyInCart:!1,initialProductQuantity:1})):t.commit("addToKnownProducts",{barcode:r,exists:!1}),e({productIsInCart:!1,productWasAlreadyInCart:!1,initialProductQuantity:-1})})).catch((function(t){n(t)})):1==c.exists?(t.commit("addToCartFromKnownProducts",r),e({productIsInCart:!0,productWasAlreadyInCart:!1,initialProductQuantity:1})):e({productIsInCart:!1,productWasAlreadyInCart:!1,initialProductQuantity:-1})):e({productIsInCart:!0,productWasAlreadyInCart:!0,initialProductQuantity:c.quantity})})));case 2:case"end":return n.stop()}}),n)})))()},checkoutCart:function(t){return new Promise((function(e,n){0==t.state.productsInCart.length?e({checkoutSuccesful:!1,cartEmpty:!0}):S.a.post("EZBagWebapp/webapi/cart",JSON.stringify({barcodes:t.state.productsInCart.map((function(t){return t.barcode})),quantities:t.state.productsInCart.map((function(t){return t.quantity})),session:"SES"+O.a.get("userToken"),businessID:t.state.businessID})).then((function(n){"failure"!=n.data.status?(t.commit("setCartHash",n.data.hash),t.commit("emptyCart"),e({checkoutSuccesful:!0,cartEmpty:!0})):e({checkoutSuccesful:!1,cartEmpty:!1})})).catch((function(t){n(t)}))}))}},A={addToKnownProducts:function(t,e){var n="Attempted to add product, "+e.barcode+", to cart, but ";void 0!=t.knownProducts.find((function(t){return t.barcode==e.barcode}))?D(n+"it is already known."):t.knownProducts.push(e)},addToCartFromKnownProducts:function(t,e){var n="Attempted to add product, "+e+", to cart, but ";if(void 0!=t.productsInCart.find((function(t){return t.barcode==e})))D(n+"it is already in the cart.");else{var r=t.knownProducts.find((function(t){return t.barcode==e}));void 0==r?D(n+"it is not known by frontend"):1==r.exists?t.productsInCart.push({barcode:r.barcode,name:r.name,price:r.price,tax:r.tax,quantity:1,description:r.description}):D(n+"it does not exist in backend's DB")}},removeProductFromCart:function(t,e){t.productsInCart=t.productsInCart.filter((function(t){return t.barcode!==e}))},setBusinessID:function(t,e){t.businessID=e},setProductQuantity:function(t,e){var n=e.barcode,r=e.typeOrAmount,a="Attempted to change quantity of product, "+n+", but ",c=t.productsInCart.find((function(t){return t.barcode==n}));if(void 0==c)D(a+"it is not in the cart");else switch(Object(I["a"])(r)){case"number":c.quantity=r;break;case"string":switch(r){case"INCREMENT":c.quantity+=1;break;case"DECREMENT":c.quantity-=1;break;default:D(a+r+"is not a recognized change type")}}},setCartHash:function(t,e){t.cartHash=e},emptyCart:function(t){t.productsInCart=[]}},B={state:R,getters:T,actions:j,mutations:A},N=n("2b27"),W=n.n(N),H=P.methods;H.$dbg_console_log;S.a.defaults.baseURL="https://blakeedwards.me:8443/",S.a.defaults.timeout=2e3,r["a"].use(W.a);var q={businessID2:null},J={getBusinessID2:function(t){return t.businessID}},M={verifyCart:function(t,e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("HASH2",e),n=JSON.stringify(e),t.abrupt("return",new Promise((function(t,e){S.a.post("EZBagWebapp/webapi/merchant/verify",n).then((function(e){"failure"!=e.data.status?(console.log(e.data),t({success:1})):t({success:0,message:e.data.message})})).catch((function(t){e(t)}))})));case 3:case"end":return t.stop()}}),t)})))()},fetchCarts:function(t,e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=JSON.stringify({businessID:e}),console.log(e),t.abrupt("return",new Promise((function(t,e){S.a.post("EZBagWebapp/webapi/merchant/carts",n).then((function(e){"failure"!=e.data.status?(console.log(e.data),t({carts:e.data.carts,success:1})):t({success:0,message:e.data.message})})).catch((function(t){e(t)}))})));case 3:case"end":return t.stop()}}),t)})))()},loginUser:function(t,e){return Object(C["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){S.a.post("EZBagWebapp/webapi/login",JSON.stringify(e)).then((function(e){"failure"!=e.data.status?(t.commit("setBusinessID",e.data.businessID),n({success:1,token:e.data.token})):n({success:0,message:e.data.message})})).catch((function(t){r(t)}))})));case 1:case"end":return n.stop()}}),n)})))()},registerUser:function(t,e){return Object(C["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){S.a.post("EZBagWebapp/webapi/register",JSON.stringify(e)).then((function(e){"failure"!=e.data.status?t({success:1}):t({success:0,message:e.data.message})})).catch((function(t){n(t)}))})));case 1:case"end":return t.stop()}}),t)})))()}},Z={setBusinessID:function(t,e){t.businessID=e}},L={state:q,getters:J,actions:M,mutations:Z};r["a"].use(k["a"]);var K="userToken",V=O.a.get(K)||([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}));O.a.set(K,V,{secure:!0,expires:99983090});var Q=new y["a"]({key:"vuex",storage:window.localStorage,reducer:function(t){return{cart:{productsInCart:t.cart.productsInCart,businessID:t.cart.businessID},merchant:t.merchant}}}),U=new k["a"].Store({modules:{cart:B,merchant:L},plugins:[Q.plugin]}),$=n("8c4f");r["a"].use($["a"]);var F=[{path:"/",name:"Scan",component:function(){return Promise.all([n.e("chunk-c961a628"),n.e("chunk-4fc6d885"),n.e("chunk-2f7346e2"),n.e("chunk-cd31d082")]).then(n.bind(null,"2274"))}},{path:"/cart",name:"Cart",component:function(){return Promise.all([n.e("chunk-c961a628"),n.e("about")]).then(n.bind(null,"fa0b"))}},{path:"/receipt",name:"Receipt",component:function(){return Promise.all([n.e("chunk-c961a628"),n.e("chunk-04ef9a62")]).then(n.bind(null,"0b66"))}},{path:"/registrationSuccess",name:"SuccessRegister",component:function(){return n.e("chunk-4116dfdd").then(n.bind(null,"1512"))}},{path:"/login",name:"Login",component:function(){return Promise.all([n.e("chunk-c961a628"),n.e("chunk-4fc6d885"),n.e("chunk-2b84ac21")]).then(n.bind(null,"852a"))}},{path:"/register",name:"Register",component:function(){return Promise.all([n.e("chunk-c961a628"),n.e("chunk-4fc6d885"),n.e("chunk-2f7346e2"),n.e("chunk-595d3815")]).then(n.bind(null,"6e52"))}},{path:"/statistics",name:"Statistics",component:function(){return n.e("chunk-2d0b9404").then(n.bind(null,"31c3"))}},{path:"/store",name:"Store",component:function(){return n.e("chunk-0ab0eca6").then(n.bind(null,"3560"))}}],z=new $["a"]({routes:F}),G=z,X=n("e5e2"),Y=n.n(X);r["a"].config.productionTip=!1,r["a"].mixin(P),r["a"].use(Y.a),new r["a"]({store:U,vuetify:w,router:G,render:function(t){return t(g)}}).$mount("#app")}});
//# sourceMappingURL=app.bf3273f7.js.map